
<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta http-equiv="x-ua-compatible" content="ie=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title>Who’s On First | Who’s On First</title>
		<meta name="description" content="Who’s on First is a gazetteer of places." />
		<link rel="apple-touch-icon" href="/images/favicons/apple-touch-icon.png" sizes="180x180" />
		<link rel="icon" type="image/png" href="/images/favicons/favicon-16x16.png" sizes="16x16" />
		<link rel="icon" type="image/png" href="/images/favicons/favicon-32x32.png" sizes="32x32" />
		<link rel="manifest" href="/images/favicons/manifest.json" />
		<link rel="mask-icon" href="/images/favicons/safari-pinned-tab.svg" color="#2C1E3F" />
		<link rel="stylesheet" href="/css/bootstrap.min.css" />
		<link rel="stylesheet" href="/css/mapzen.whosonfirst.css" />
		
		<link rel="stylesheet" href="/css/styles/grayscale.css" />

		<link rel="alternate" type="application/atom+xml" title="Who's On First Atom feed" href="/blog/atom_10.xml"/>		
		<link rel="alternate" type="application/rss+xml" title="Who's On First RSS 2.0 feed" href="/blog/rss_20.xml"/>

		
		<meta property="og:type" content="article" />
		<meta property="og:site_name" content="Who's On First" />
		<meta property="og:title" content="Who’s On First" />
		<meta property="og:description" content="Mapzen is building a gazetteer of places. Not quite all the places in the world but a whole lot of them and, we hope, the kinds of places that we mostly share in common. You might want to get a cup of coffee or maybe a drink if you’ve been thinking about this sort of thing for as long as we have (or maybe longer)." />
		<meta property="og:image" content="https://www.whosonfirst.org/blog/2015/08/18/who-s-on-first/images/20150818-wof-phones.png" />
		
		<meta property="twitter:card" value="summary" />
		<meta property="twitter:site" content="@alloftheplaces" />
		<meta property="twitter:creator" content="@alloftheplaces" />
		<meta property="twitter:url" content="https://www.whosonfirst.org/blog/2015/08/18/who-s-on-first/" />
		<meta property="twitter:title" content="Who’s On First" />
		<meta property="twitter:description" content="Mapzen is building a gazetteer of places. Not quite all the places in the world but a whole lot of them and, we hope, the kinds of places that we mostly share in common. You might want to get a cup of coffee or maybe a drink if you’ve been thinking about this sort of thing for as long as we have (or maybe longer)." />
		<meta property="twitter:image" content="https://www.whosonfirst.org/blog/2015/08/18/who-s-on-first/images/20150818-wof-phones.png" />
		

	</head>
	<body>
		<div class="whosonfirst-wrapper">

			<nav class="navbar navbar-default navbar-fixed-top whosonfirst-fixed-subpage-navbar">
				<div class="container">

					
					<div class="navbar-header">
						<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
							<span class="sr-only">Toggle navigation</span>
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
						</button>
						<a class="navbar-brand" href="/">Who’s On First</a>
					</div>

					
					<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
					  <ul class="nav navbar-nav navbar-right">

							<li class="whosonfirst-navbar-element-collapsed">
								<a href="/browse/" class="whosonfirst-nav-link whosonfirst-nav-link-collapsed">browse</a>
							</li>
					    
							<li class="whosonfirst-navbar-element-collapsed">
								<a href="/docs/" class="whosonfirst-nav-link whosonfirst-nav-link-collapsed">documentation</a>
							</li>
							
							<li class="whosonfirst-navbar-element-collapsed">
								<a href="/code/" class="whosonfirst-nav-link whosonfirst-nav-link-collapsed">code</a>
							</li>

							<li class="whosonfirst-navbar-element-collapsed">
								<a href="/api/" class="whosonfirst-nav-link whosonfirst-nav-link-collapsed">api</a>
							</li>
							
							<li class="whosonfirst-navbar-element-collapsed">
								<a href="/download/" class="whosonfirst-nav-link whosonfirst-nav-link-collapsed">download</a>
							</li>
							
							<li class="whosonfirst-navbar-element-collapsed">
								<a href="/blog/" class="whosonfirst-nav-link whosonfirst-nav-link-collapsed">blog</a>
							</li>
						</ul>
					</div>
				</div>
			</nav>


		<style type="text/css">
		  body {
		  font-family: serif;
		  font-size: 1.3em;
		  line-height: 1.5em;
		  }

		  h2 small {
		  display: block;
		  margin-top:.10em;
		  font-weight: 100;
		  font-size: .5em;
		  line-height: 1.3em;
		  }

		  p {
		  line-height: 1.5em !important;
		  }

		  ul {
		  font-size:1.3em;
		  line-height:1.5em;
		  margin-top:1em !important;
		  }

		  li {
		  list-style-type: circle;
		  margin-bottom: .5em;
		  }

		  img {
		  max-width: 640px !important;
		  max-height: 480px !important;
		  border: 1px dotted #ccc;
		  padding: .5em;
		  margin-bottom:1em;
		  margin-top: 1em;
		  display:block;
		  min-width: 320px;
		  margin: 0 auto;
		  }

		  blockquote {
		  background-color:#ededed;
		  margin-top:1em;
		  padding-top:.05em !important;
		  padding-bottom:1.75em !important;
		  }

		  .hey-look {
		  font-weight: 700;
		  }

		  @media (min-width: 320px) and (max-width: 400px) {

		  ul {
		  margin:0px;
	  	  margin-left:15px;
		  padding:0px;
		  }

		  pre {
		  max-width:250px;
		  overflow:scroll;
		  }

		  img {
		  max-width: 250px !important;
		  max-height: 200px !important;
		  min-width: 75px;
		  }
		  }

		</style>

			<div class="container whosonfirst-subpage-container">
			  <div class="row">
			    <div class="col-lg-1 col-md-1 col-sm-1 col-xs-0">
 			    </div>
			    <div class="col-lg-10 col-md-10 col-sm-10 col-xs-12">
			      <article>

	  
	  
	  <h2>
	    Who’s On First
	    <small>This is a blog post by
	      <span class="hey-look">thisisaaronland</span> and <span class="hey-look">nvkelso</span>
	      that was published on <span class="pubdate"><a href="/blog/2015/08/">Aug</a> <a href="/blog/2015/08/18">18</a>, <a href="/blog/2015/">2015</a></span>
	       and tagged <span class="hey-look">whosonfirst</span></small>
	  </h2>

<h2>The short version</h2>

<p><img src="images/20150818-wof-phones.png" alt="phone booth" /></p>

<p>All the places! Still not a magic pony!! Yet!!!</p>

<h2>The longer version</h2>

<p>Mapzen is building a gazetteer of places. Not quite <em>all</em> the places in the world but a whole lot of them and, we hope, the kinds of places that we mostly share in common. A gazetteer is a big list of places, each with a stable identifier and some number of descriptive properties about that location. An interesting way to think about a gazetteer is to consider it as the space where debate about a place is <em>managed</em> but not decided. We call our gazetteer &ldquo;Who&rsquo;s On First&rdquo; (or sometimes &ldquo;WOF&rdquo; for short).</p>

<p>According to <a href="https://en.wikipedia.org/wiki/Who's_on_First%3F">Wikipedia</a>, Who’s on First:</p>

<blockquote> ...is a comedy routine made famous by Abbott and Costello. The premise of the sketch is that Abbott is identifying the players on a baseball team for Costello, but their names and nicknames can be interpreted as non-responsive answers to Costello's questions. For example, the first baseman is named "Who"; thus, the utterance "Who's on first" is ambiguous between the question ("Which person is the first baseman?") and the answer ("The name of the first baseman is 'Who'"). "Who's on First?" is descended from turn-of-the-century burlesque sketches that used plays on words and names. Examples are "The Baker Scene" (the shop is located on Watt Street) and "Who Dyed" (the owner is named Who). In the 1930 movie Cracked Nuts, comedians Bert Wheeler and Robert Woolsey examine a map of a mythical kingdom with dialogue like this: "What is next to Which." "What is the name of the town next to Which?" "Yes." In English music halls (Britain's equivalent of vaudeville theatres), comedian Will Hay performed a routine in the early 1930s (and possibly earlier) as a schoolmaster interviewing a schoolboy named Howe who came from Ware but now lives in Wye.</blockquote>

<p>Which sort of sums up the “problem” of geo, nicely. It might be easier, perhaps, if we all understood and <a href="https://github.com/google/open-location-code">experienced the world as coordinate data</a> but we don’t, so the burden of “place” and its many meanings is one we trundle along with to this day.</p>

<p>Our gazetteer is absolutely not finished – both in terms of data coverage as well as data quality – so, in the near-term, you should adjust your expectations accordingly when you approach the data.</p>

<p>We are releasing the data now because <em>we believe it is important not just to articulate our goals and intentions around the project but also to back them up with tangible proofs</em>. Think of this blog post, and the data we are publishing today, as the arc and direction of our efforts but not necessarily where they will land.</p>

<p><img src="images/20150818-wof-villadoria.png" alt="screenshot - villa doria" /></p>

<p><pullquote>We believe it is important not just to articulate our goals and intentions around the project but also to back them up with tangible proofs.</pullquote></p>

<p>Ours is not the first gazetteer (and hopefully not the last). Many gazetteers have existed before. Notable examples include:</p>

<ul>
<li>The Getty Institute’s <a href="https://www.getty.edu/research/tools/vocabularies/tgn/">Thesaurus of Geographic Names</a></li>
<li><a href="http://adl-gazetteer.geog.ucsb.edu/">The Alexandria Digital Library</a></li>
<li>Yahoo&rsquo;s <a href="https://en.wikipedia.org/wiki/Yahoo!_GeoPlanet">GeoPlanet</a></li>
<li><a href="http://www.geonames.org/">Geonames</a></li>
<li>The joint effort of the New York Public Library (NYPL) and the Library of Congress (LoC) to create <a href="http://loc.gazetteer.us/">an historical gazetteer</a></li>
<li>The NYPL’s recently announced <a href="http://spacetime.nypl.org/">Space/Time Directory</a></li>
<li><a href="http://www.naturalearthdata.com/">NaturalEarth</a></li>
<li><a href="http://quattroshapes.com/">Quattroshapes</a></li>
</ul>

<p>We use <a href="http://quattroshapes.com/">Quattroshapes</a> as the foundation for our data set, as it has most of the stuff, in most of the places, most of the time.</p>

<p>From there we are merging in relevant additions (geometries and metadata alike, as the various licenses permit) from <a href="http://www.naturalearthdata.com/">Natural Earth</a>, <a href="https://en.wikipedia.org/wiki/Yahoo!_GeoPlanet">GeoPlanet</a>, <a href="http://www.geonames.org/">GeoNames</a> and the <a href="http://zetashapes.com/">Zetashapes</a> project.</p>

<p><em>People who’ve been around this problem for as long as we have may be thinking: Doesn’t this mean that the coverage for certain place types (many neighbourhoods around the world and in some countries even localities) will be lacking to start with? The answer is: Yes. One of our immediate goals is to identify which places in the GeoPlanet dataset lack both a concordance with and a corresponding record to Quattroshapes. Once we have that list we can import the names and hierarchies for those places from GeoPlanet at which point the coverage should improve immediately. Many of those places will lack coordinate data at the time of import but we believe that is a problem that can be tackled in time.</em></p>

<p>Ours is not the first effort to create an open and comprehensive data set of the world. We think that each one of the projects mentioned above offers their own unique contributions and we hope that by “smushing” them all together we can start to create something greater than the sum of its parts.</p>

<p>Also, all the data is made available under a <a href="https://creativecommons.org/choose/zero/">Creative Commons Zero</a> designation.</p>

<p>We make use of a number of open data sources, some of whom do require attribution. We have listed them <a href="https://github.com/mapzen/whosonfirst-data#sources">over here</a>.</p>

<h2>The long version</h2>

<p><img src="images/20150818-wof-oceanbeach.jpg" alt="Bench on the seashore" /></p>

<p><pullquote>An interesting way to think about a gazetteer is to consider it as the space where debate about a place is <em>managed</em> but not decided.</pullquote></p>

<p>Long version is long. You might want to get a cup of coffee or maybe a drink if you’ve been thinking about this sort of thing for as long as we have (or maybe longer).</p>

<h3><a name="what-is-gazetteer"></a> What is a &ldquo;gazetteer&rdquo; anyway?</h3>

<p>Like we said before, a gazetteer is a big list of places, each with a stable identifier and some number of descriptive properties about that location. An interesting way to think about a gazetteer is to consider it as the space where debate about a place is <em>managed</em> but not decided.</p>

<p>The simplest and friendliest expression of this idea is to consider the many different ways that people spell the name for the same physical location. Sometimes two people who agree on how to spell a name can find themselves at odds when one of them spells it incorrectly. Consider how finicky geocoders can still be about the manner in which a query is formatted and the hilarity that often ensues when a query is entered incorrectly. Now take this dynamic and multiply it by all the languages in the world.</p>

<p>Sometimes the easiest way to describe the purpose of a gazetteer is to say that it exists to make the &ldquo;spelling mistake problem&rdquo; go away. If every location has a simple (often numeric but more importantly <em>stable</em>) identifier then you and I can refer to the same place, in any number of different contexts, using that identifier without having to spend a lot of time accounting for linguistic differences or subtleties.</p>

<p>For example I might say &ldquo;Montreal&rdquo; (in English) while you might say “몬트리올” (in Korean) while someone else might say  &ldquo;Montréal&rdquo; (in French) or &ldquo;MTL&rdquo; (in Conversational Shortcut) and so on. The gazetteer is meant to be a happy, welcoming and stable space where all those representations of the same place – or if you’re feeling frisky, the same consensual hallucination – can co-exist.</p>

<p>A more complicated expression of the idea that a gazetteer exists to manage debate is to remember that &ldquo;place&rdquo; is a hard problem because it is often a contested space at social, political and often very emotional levels. This is not a new problem. People have argued and sometimes fought over the meaning and the expression of place for as long as anyone can remember.</p>

<p><img src="images/20150818-wof-montreal.png" alt="screenshot - example of Montreal" /></p>

<p>Even with the luxury of complete sentences and full paragraphs and entire books on the subject different writers and scholars <em>still</em> after all these years can&rsquo;t or don&rsquo;t or won&rsquo;t agree on the meaning of a given place. It would be &hellip; unhelpful, at best, to believe that any list of key-value pairs, no matter how comprehensive,  attempting to describe the nuance of a place will do any better at resolving long-standing disputes about the fundamental meaning and interpretation about that place.</p>

<h3>First principles</h3>

<p>The gazetteer starts from a series of first principles:</p>

<h4>Mapzen has an opinion</h4>

<p>It is important that Mapzen have an opinion not about any one place but rather about <em>the nature of place</em> itself. It is important for us to know and understand the boundaries of our project in order to know what the project is for and, critically, what the project is not.</p>

<h4>Leave as many decisions as possible to the &ldquo;edges&rdquo;</h4>

<p>The world is a complicated place and we would like the gazetteer to be a project that can support, or act as a scaffolding for, the sometimes contradictory opinions that people have about it. We aim to leave as much meaning or inference, as we can, about a place to individual users and applications. How this will manifest itself in concrete terms remains to be seen but this is a goal we have set for ourselves.</p>

<h4>Portability</h4>

<p>The canonical source for a place is a text file, specifically GeoJSON with a unique 64-bit numeric ID. This is because all computers speak &ldquo;text files&rdquo; and &ldquo;numbers&rdquo;. Text files can be inspected or updated in any old text editor. Text files can be printed. Numbers are fast and cheap for databases to index.</p>

<p>We use text files because our primary concern for the data is: Ease of use, robustness and portability <em>over time</em>. On measure, the benefits of plain old text files outweigh both the costs and in many cases the benefits of other formats.</p>

<p>Google&rsquo;s <a href="https://developers.google.com/protocol-buffers/">Protocol Buffers</a> for example are awesome but require that you install a whole lot of Google on your computer in order to use them. ESRI&rsquo;s <a href="https://en.wikipedia.org/wiki/Shapefile">Shapefiles</a> are equally awesome and their ubiquity and longevity is a testament to their utility but they too require bespoke applications for even the most trivial of updates.</p>

<p><pullquote>Our primary concern for the data is: Ease of use, robustness and portability over time.</pullquote></p>

<p>That does not mean that plain text or static files are necessarily the optimal choice for delivery or distribution. We will account for that on a case-by-case basis. If we need to pre-process all the data into a smaller and nimbler format for a specific use-case then we will, but you will always be able to access the data as simple text files.</p>

<h4><a name="geojson"></a> GeoJSON</h4>

<p>We use <a href="http://www.geojson.org">GeoJSON</a> as the primary exchange format for the gazetteer for two interconnected and complementary reasons:</p>

<ul>
<li><p>It is structured data with the least amount of markup <em>today</em>. If someone creates another markup language with even less scaffolding we might use that instead but for now GeoJSON is a good happy medium.</p></li>

<li><p>There are lots of tools for working with GeoJSON and, importantly, for converting it into all the other formats that different people use.</p></li>
</ul>

<h3>Tell me more (the hard bits)</h3>

<p><img src="images/20150818-wof-mirrorball.jpg" alt="mirrorball" /></p>

<p>If you are immediately curious about the simple bits, where &ldquo;simple&rdquo; means names, geometries and minimal viable properties (and which are simple relative only to what follows) then you should <a href="#the-simple-bits">jump ahead</a>.</p>

<h4>Concordances</h4>

<p>Concordances are a good place to start since we&rsquo;ve already mentioned other gazetteers. Put simply: We want to hold hands with as many other gazetteers – past present and future – as possible.</p>

<p><pullquote>Concordances allow everyone to work on the things that are important to them while still being aware and acknowledging the work that others are doing and provide a mechanism for all that work to hold hands.</pullquote></p>

<p>There is more than enough room for multiple gazetteers in the world and the point of a concordance is only to be able to say, for example, that “our Boston” is the same as “their Boston”. The details of either one of those records may be entirely different because of an individual organization’s focus or perspective. Multiple outlooks on the same subject are a good thing. Concordances allow everyone to work on the things that are important to them while still being aware and acknowledging the work that others are doing and provide a mechanism for all that work to hold hands.</p>

<p>Every WOF record contains a property called <code>wof:concordances</code> which is a dictionary of simple key/value pointers to the identifiers of the same in other databases. For example:</p>

<pre><code class="language-js">&quot;wof:id&quot;: 101736545,
&quot;wof:concordances&quot;: {
	&quot;fct:id&quot;: &quot;03c06bce-8f76-11e1-848f-cfd5bf3ef515&quot;,
	&quot;gn:id&quot;: &quot;6077243&quot;,
	&quot;gp:id&quot;: &quot;3534&quot;
}
</code></pre>

<p>As of this writing we have concordances for things from GeoNames (159, 359 of them), GeoPlanet (135, 399 of them), QuattroShapes (115, 550 of them), Factual (80, 973 of them), a variety of airport codes (ICAO, IATA, FAA and OurAirports), Wikipedia pages (just for airports right now) and even concordances for <a href="https://mapzen.com/data/borders/">Mapzen Border countries</a>. Soon, we will have more.</p>

<h4><a name="placetypes"></a> Placetypes</h4>

<p>For any hierarchy of place types we have identified three “classes” that any one of those place types can fall into. That doesn&rsquo;t mean there can&rsquo;t be others (classes or place types) only that these are the ones we&rsquo;ve identified as a good place to start.</p>

<h6>Common &amp;#40;C)</h6>

<p>These are, well, common across <em>any</em> hierarchy for any place in Who&rsquo;s On First.</p>

<p>This part is important: It means that at some point every single record shares at least one or more common ancestors (for example a country or a continent or occasionally just the Earth). That doesn&rsquo;t preclude very specific additions to the hierarchy for a given location only that those additions need to fit within a common hierarchy shared across all locations.</p>

<h6>Common-optional (CO)</h6>

<p>These are meant to be part of a common hierarchy but may not be present because they aren&rsquo;t relevant or because we don&rsquo;t have the data. Counties are a good example of this.</p>

<h6>Optional (O)</h6>

<p>These are the parts of a hierarchy specific, typically, to a country or region. For example, the many nested &ldquo;departments&rdquo; in France or Germany. The only rule is that an optional (O) place type has to fit somewhere inside the common &amp;#40;C) hierarchy.</p>

<p>So the minimum list of place types for a hierarchy applied globally looks like this:</p>

<pre><code>- continent (C)
  - country (C)
    - region (C)
      - &quot;county&quot; (CO)
        - locality (C)
          - neighbourhood (C)
</code></pre>

<p>A more nuanced version might look like this:</p>

<pre><code>- continent (C)
  - empire (CO)
    - country (C)
      - region (C)
        - &quot;county&quot; (CO)
          - &quot;metro area&quot; (CO)
            - locality (C)
              - macrohood (O)
                - neighbourhood (C)
                  - microhood (O)
                    - campus  (CO)
                      - building (CO)
                        - address (CO)
                          - venue (C)
</code></pre>

<p>Venues! Buildings!! <a href="https://github.com/whosonfirst/whosonfirst-data/blob/master/meta/wof-microhood-latest.csv">Microhoods</a>!!! Empires!!!!</p>

<p>So many new things but throughout you can still see a common skeleton. There is an <a href="https://github.com/whosonfirst/whosonfirst-placetypes">entire Github repository devoted to the topic of placetypes</a> including a discussion (and a canonical reference) about each of the place types described above.</p>

<p><img src="images/20150818-wof-beijing.png" alt="screenshot - example of Beijing" /></p>

<h4><a name="hierarchies"></a> Hierarchies</h4>

<p>Hierarchies in Who&rsquo;s On First are represented as a list of dictionaries, where each item is a dictionary containing a full hierarchy. Like this:</p>

<pre><code class="language-js">&quot;wof:hierarchy&quot;: [
	{
		&quot;country_id&quot;: &quot;85633147&quot;,
		&quot;region_id&quot;: &quot;85683255&quot;,
		&quot;county_id&quot;: &quot;102072387&quot;,
		&quot;locality_id&quot;: &quot;101750223&quot;,
		&quot;neighbourhood_id&quot;: &quot;85794581&quot;
	}
]
</code></pre>

<p>This is because a location in Who&rsquo;s On First can have <em>multiple</em> divergent hierarchies. Consider place types like metropolitan areas (the “Bay Area” in and around San Francisco, “New York” inclusive of all five boroughs and even some parts of New Jersey and so on) which often contain multiple children of the same place type. Consider disputed territories. There is a whole separate document about the rationale for this decision and how we arrived at it but the short excerpted version is this:</p>

<blockquote>
Reasons why this suggestion is good:

<ul>
<li>It is explicit</li>
<li>It is easy to compare multiple hierarchies</li>
<li>It doesn't require the user do a lot of mental arithmetic to construct the complete hierarchy or to support whatever "efficiencies" we dream up in the moment</li>
<li>It is easier to change going forward (say before an "official" launch) than the alternatives</li>
</ul>

Reasons why this suggestion is, or might be, bad:

<ul>
<li>If we support metropolitan areas, then many places (localities, neighbourhood, venues) may have multiple hierarchies where the only difference will (likely) be the county, leaving all the remaining ancestors in common</li>
<li>File size, disk space and bandwidth - this is the corollary of the first point and akin to whitespace or coordinates with > 6 decimal points in GeoJSON files which can become burdensome quickly</li>
</ul>

</blockquote>

<h4>Disputed areas</h4>

<p>Although it is true that all neighbourhoods and many localities are &ldquo;disputed&rdquo; in a friendly-banter kind of way some places are genuinely more disputed than others because they involve two or more countries (and sometimes so-called <a href="https://en.wikipedia.org/wiki/Non-state_actor">non-state actors</a>), a real threat of violence and consequences that in no way resemble &ldquo;friendly banter&rdquo;.</p>

<p>For the time being we have explicitly assigned places we know to be disputed a place type of <code>disputed</code>. As of this writing disputed places are parented, in their hierarchies, by two or more countries. This approach does not reflect the subtleties of the facts on the ground in any, of these disputed places. On the other hand it does allow to &ldquo;block out&rdquo; areas that are contested and, as we’ve said above, to leave the decisions about how to reflect the dispute to individual applications.</p>

<h6>Parent ids and &ldquo;custody&rdquo;</h6>

<p>Even though a place can have multiple hierarchies we still assume that in most cases there is a single &ldquo;authority&rdquo; in place, on the ground. For example, the Golan Heights is disputed by both Syria and Israel, a fact reflected in the place hierarchy, but is still “parented” by Israel:</p>

<pre><code class="language-js">&quot;wof:hierarchy&quot;: [
	{
		&quot;continent_id&quot;: &quot;102191569&quot;,
		&quot;country_id&quot;: &quot;85632315&quot;,
		&quot;disputed_id&quot;: &quot;85632221&quot;
		},
	{
		&quot;continent_id&quot;: &quot;102191569&quot;,
		&quot;country_id&quot;: &quot;85632413&quot;,
		&quot;disputed_id&quot;: &quot;85632221&quot;
	}
],
&quot;wof:id&quot;: &quot;85632221&quot;,
&quot;wof:name&quot;: &quot;Golan Heights&quot;,
&quot;wof:parent_id&quot;: &quot;85632315&quot;,
</code></pre>

<p>In a few isolated cases we really don&rsquo;t have a good answer for who the parent is or if we&rsquo;re just not sure because it&rsquo;s early days and are still vetting the data we will assign a value of <code>-1</code> for the parent record.</p>

<p>Occasionally we will assign a value of <code>-2</code>. This should be interpreted as &ldquo;:shrug: the world is a complicated place&rdquo;. For example, <a href="https://github.com/mapzen/whosonfirst-data/issues/16">the Baykonur Cosmodrome is a little donut hole of Russia</a> surrounded by the nation of Kazakhstan.</p>

<h4>Superseded / Superseded by</h4>

<p>One of the large and difficult philosophical questions that working with geography raises is this: <em>How do you decide when something has simply been updated versus when has something fundamentally changed?</em></p>

<p>This is not a &ldquo;geo&rdquo; question per se, only that &ldquo;geo&rdquo; has a habit of poking it in the eye. For example Poland, France and Germany spent the better part of a hundred years claiming and reclaiming (and then sometimes reclaiming again) the same territory. Those borders, and the periods during which they existed, are important contextual information for lots of applications beyond just maps. Consider works of art created in those parts of Poland that were German at the time of their creation. How do you create stable identifiers for a location that has changed, in concrete and meaningful ways, over time?</p>

<p><pullquote>One of the large and difficult philosophical questions that working with geography raises is this: How do you decide when something has simply been updated versus when has something fundamentally changed?</pullquote></p>

<p>A little closer to home, in New York City, everyone’s favourite <em>that-is-so-not-a-neighbourhood</em> is called: “BoCoCa”. BoCoCa is short for Boerum Hill, Cobble Hill and Carroll Gardens, three adjacent neighbourhoods south of downtown Brooklyn. BoCoCa is neither a name that anyone seems to like, nor is it a place type that most people recognize as a neighbourhood. On the other hand it is a neighbourhood (and an identifier) that has made its way into lots of other maps and datasets. Whatever we may think about it BoCoCa has “existed”.</p>

<p>So in Who’s On First we’ve changed its place type and made BoCoCa a “macrohood” that parents the three neighbourhoods from which its name is derived.</p>

<p>A location’s place type is a pretty fundamental property and it’s easy to imagine that a third-party application might use and store that metadata for important application-specific purposes. Which is to say: We don’t need to have an opinion about what or why an application is doing something with the metadata associated with a location and if we start by saying that WOF ID 85892915 is a neighbourhood (which it was when we imported the data from Quattroshapes) <em>we probably shouldn’t just change it on a whim</em>.</p>

<p>We also don’t think BoCoCa is a neighbourhood, though. We absolutely have an opinion about that. At one time BoCoCa might have been a neighbourhood but in our world it no longer is. The way that we reconcile problems like this is by creating a new record with a new place type (BoCoCa the macrohood) and by updating each record to indicate that one supersedes the other.</p>

<p>For example, the record for BoCoCa the neighbourhood looks like this:</p>

<pre><code class="language-js">&quot;wof:superseded_by&quot;: [102147495],
&quot;wof:supersedes&quot;: [],
</code></pre>

<p>While the record for BoCoCa the macrohood looks like this:</p>

<pre><code class="language-js">&quot;wof:superseded_by&quot;: [],
&quot;wof:supersedes&quot;: [85892915]
</code></pre>

<p>It is left up to individual applications to decide how or whether to treat records that have been superseded differently. A search engine, for instance, may choose to weight a superseded place differently or exclude it altogether.</p>

<h6>Breaches</h6>

<p>Every record has a <code>wof:breaches</code> list attached to its properties. Depending on when you read this blog post, most or all of those lists may still be empty. A “breach” occurs when the geometry of a given location is intersected by the geometry of another location of the same place type.</p>

<p>The purpose of these lists is to signal to users of the Who’s On First data that there is either an error in the data (most country records shouldn’t breach any of their neighbours) or that there is a legitimate difference of opinion about the boundaries of a place (neighbourhoods, for example).</p>

<p>Like many signals its precise meaning and significance and how it should be handled is left up to individual applications.</p>

<h3>Tell me more (the simple bits)</h3>

<p><img src="images/20150818-wof-bernal.jpg" alt="bernal" /></p>

<p><em>Remember, what follows is the &ldquo;simple&rdquo; stuff&hellip;</em></p>

<h4>Names</h4>

<p>All place names were originally derived from the Quattroshapes and Natural Earth datasets. Overall though the GeoPlanet (GP) dataset is better for names in multiple languages, and for colloquial place names. GP defines two properties for a name:</p>

<ol>
<li>An <a href="https://en.wikipedia.org/wiki/ISO_639-3">ISO 639-3</a> language code</li>
<li>A name &ldquo;type&rdquo;, which is a well-known list of descriptors as defined by the nice GP people:</li>
</ol>

<blockquote>
The Name_Type field is a single letter code that describes the alias as follows:

<ul>
<li>P is a preferred English name</li>
<li>Q is a preferred name (in other languages)</li>
<li>V is a well-known (but unofficial) variant for the place (e.g. "New York City" for New York)</li>
<li>S is either a synonym or a colloquial name for the place (e.g. "Big Apple" for New York), or a version of the name which is stripped of accent characters.</li>
<li>A is an abbreviation or code for the place (e.g. "NYC" for New York)</li>
</ul>
</blockquote>

<p>GP also distinguishes between a <code>name</code> and an <code>alias</code> so in their world you end
up with something like:</p>

<pre>
Name:  Montréal
Language: FRE
Alias (ENG_P): Montreal
Alias (KOR_Q): 몬트리올
</pre>

<p>GP does not however account for the fact that <a href="https://www.youtube.com/watch?v=OHzMTSK1V4o">some countries</a> have multiple languages. With all that in mind, we decided that:</p>

<ul>
<li>We should support multiple languages for a place and label placement</li>
<li>We should just use <code>p</code> for a preferred name, regardless of language</li>
<li>We should use a <code>name</code> namespace for names because it is explicit</li>
</ul>

<p>For example:</p>

<pre><code class="language-json">{
	&quot;wof:lang&quot;: [&quot;eng&quot;, &quot;fre&quot;],
	&quot;name:eng_p&quot;: &quot;Montreal&quot;,
	&quot;name:eng_a&quot;: &quot;YMQ&quot;,
	&quot;name:fre_p&quot;: &quot;Montréal&quot;,
	&quot;name:kor_p&quot;: &quot;몬트리올&quot;,
}
</code></pre>

<h4>Geometries</h4>

<h6>The &ldquo;consensus&rdquo; geometry</h6>

<p><img src="images/20150818-wof-canada.png" alt="canada geojson" /></p>

<p>Every place will have a single &ldquo;consensus&rdquo; geometry associated with it. The definition of &ldquo;consensus&rdquo; remains to be determined. Also, the use of the word &ldquo;consensus&rdquo; is understood to be problematic. It <em>will</em> be deprecated and replaced with a more accurate term.</p>

<h6>All the &ldquo;other&rdquo; geometries</h6>

<p><img src="images/20150818-wof-canada-alt.png" alt="canada alternative geometry" /></p>

<p>Every place will also have an &ldquo;alternate&rdquo; file containing multiple named geometries. These might include contested geographies or simplified geometries or geometries that have been optimized for specific use-cases, like geocoding.</p>

<p>The point is this: ALL THE GEOMETRIES.</p>

<p>The source for the consensus (sic) geometry and all the alternate geometries are included in every record. For example:</p>

<pre><code class="language-json">{
	&quot;src:geom&quot;: &quot;zetashapes&quot;,
	&quot;src:geom_alt&quot;: [&quot;quattroshapes&quot;, &quot;naturalearth&quot;]
}
</code></pre>

<h6>Centroids</h6>

<p>Any given record can have multiple centroids. It is worth pointing out that “multiple centroids” can be read as a bit of an oxymoron. We use the term “centroid” to denote a specific area of focus for a geometry. Different centroids are denoted by prefixes, indicating their use. For example:</p>

<ul>
<li><p><code>geom:latitude</code> and <code>geom:longitude</code> – which are the actual center of the consensus polygon and calculated using the magic of mathematics.</p></li>

<li><p><code>lbl:latitude</code> and <code>lbl:longitude</code> – which are used to indicate the optimal location for label placement. For example, the polygon for San Francisco includes the Farallon Islands which means that the “center” of that polygon is actually in the Pacific Ocean and not an optimal place to label the city.</p></li>

<li><p><code>nav:latitude</code> and <code>nav:longitude</code> – which are used to indicate where, specifically, a routing engine should direct you. For example, the entrance to the ER at a hospital rather the loading bay for delivery trucks arriving at the same location.</p></li>
</ul>

<h4>Minimal viable properties</h4>

<p>The design model for the <a href="http://www.flickr.com/services/api">Flickr API</a> was: <em>What is the one thing you should always be able to do with any photo-related API response?</em></p>

<p>For Flickr the answer was the &ldquo;<a href="https://code.flickr.net/2008/08/19/standard-photos-response-apis-for-civilized-age/">standard photo response</a>&rdquo;
or: <em>You should always be able to load/build the URL for a photo with a link back to
its page on Flickr’s website</em>.</p>

<p>In Mapzen’s case the answer to a similar-minded question might be: <em>You should always be able to view API responses on a map</em>.</p>

<p>For example it should be possible to take anything that comes back from <a href="http://pelias.mapzen.com/">Pelias</a> (or any other API) and simply hand it off to Leaflet as a <code>GeoJSON</code> layer and see something on a map.</p>

<p>With that in mind a &ldquo;minimal viable properties&rdquo; dictionary might look like this:</p>

<pre><code class="language-json">{
	&quot;wof:id&quot;: 85922583,
	&quot;wof:name&quot;: &quot;San Francisco&quot;,
	&quot;wof:fullname&quot;: &quot;San Francisco, California US&quot;,
	&quot;wof:placetype&quot;: &quot;locality&quot;,
	&quot;wof:parent_id&quot;: 85688637,
	&quot;wof:quality&quot;: 9,
	&quot;wof:score&quot;: 100
}
</code></pre>

<p>A couple things to note about this example:</p>

<ul>
<li><p>When we say “properties” we’re talking about the metadata associated with that place rather than its geometry.</p></li>

<li><p>The <code>wof:score</code> property and its semantics should be considered a place-holder for some equivalent search ranking to be determined by the Pelias team. Likewise, the <code>wof:quality</code> property and its semantics should also be considered a place-holder for some equivalent quality/confidence ranking to be determined by the Data team.</p></li>
</ul>

<h3>Future magic (making it)</h3>

<p>What follows are a list of properties that aren’t currently supported or are still so “early days” that the easiest thing is to consider them unsupported. They are included here because they absolutely <em>should and will</em> be supported, in time.</p>

<h4>Ranking(s)</h4>

<h6>Quality</h6>

<p>How good or confident do we feel about the data included in a given record.</p>

<h6>Coverage</h6>

<p>Where “coverage” is meant to indicate the number of attributes that have been recorded about a place. We might have excellent names and alternate names for a place but little else in the way of metadata (population, elevation, etc.)</p>

<h4>Dates</h4>

<p>What are the dates that a place was founded or, in some cases, ceased to exist? This becomes especially relevant in a dataset where every record might be superseded or supersede another.</p>

<p>Dates are actually a pretty complex space so we are going to start with the simplest thing and then gradually grow it to account for the realities of life and of history. The Library of Congress’ work around an <a href="http://loc.gov/standards/datetime/">Extended DateTime Format (EDTF)</a> is a good place to start poking around if you’re curious about this sort of thing.</p>

<h3><a name="where-is-the-data"></a> But wait&hellip; where is this data you speak of?</h3>

<p><img src="images/20150818-wof-yo.png" alt="screenshot" /></p>

<p>First – and this is Very Very Very Important – please understand that Who’s On First is a work in progress and that means a few things:</p>

<ul>
<li><p>Some (maybe even a lot) of the data will be wrong.</p></li>

<li><p>Some things are missing. Some things are missing in a <a href="https://github.com/TileStache/TileStache/blob/fb60b32439ebf108f983eaa4556627b07848d7ad/TileStache/Core.py#L772-L821">known unknown</a> kind of way in which case they’ll be addressed shortly. Some things may still be missing in an <a href="https://en.wikipedia.org/wiki/There_are_known_knowns">unknown unknown</a> kind of way in which case they’ll be addressed as the errors become apparent.</p></li>

<li><p>Some (probably most) of the data will change in some way, if only to account for #1.</p></li>

<li><p>We have not formalized or finalized the tools for updating all the ancestors or dependencies of a record when that record is updated. This means that in the short-term it is possible there will be inconsistencies between a record and its relations. We’ll get there.</p></li>
</ul>

<p>The purpose of releasing the data now is not to sound the trumpets and herald a new dawn of perfect data but rather to give substance to everything we’ve been talking about and to have a meaningful dataset with which to prove or disprove our assumptions and to work through the practicalities of working with that data.</p>

<p><pullquote>A lot of work is what’s next.</pullquote></p>

<p>If you don’t have the time or the temperament (personally or institutionally) to deal with a little bit of on-going <a href="http://www.ralphsteadmanprints.com/images/00art/gonzo/02badcrazy.jpg">bad craziness</a> as we work through the issues then digging in to the data now is probably premature. We intend to continue working in public and discussing the project openly so keep an eye on the blog and we’ll let you know as things improve.</p>

<p>As of this writing the raw Who’s On First GeoJSON data files exist in two places: A public AWS S3 endpoint and as a GitHub repository with lots of tiny little files. Their URLs respectively are:</p>

<ul>
<li><a href="https://s3.amazonaws.com/whosonfirst.mapzen.com/data/">https://s3.amazonaws.com/whosonfirst.mapzen.com/data/</a></li>
<li><a href="https://github.com/whosonfirst/whosonfirst-data/">https://github.com/whosonfirst/whosonfirst-data/</a></li>
</ul>

<p><em>Note: The S3 link above is not meant to be a &ldquo;browseable&rdquo; thing so much as an endpoint that people know how to work with S3 can start to do stuff with. If those words sound like gibberish to you then you should not click on the S3 link and just have a look at the GitHub link instead.</em></p>

<p>There is not currently a publicly available tool for browsing the data. We have an internal “spelunker” that we plan to open-source (along with a number of related libraries for working with Who’s On First data) but that is not going to happen today.</p>

<p>The GitHub repository also contains a number of “meta” files, located in the cleverly-named <a href="https://github.com/whosonfirst/whosonfirst-data/tree/master/meta"><code>meta</code> directory</a>. These are mostly CSV files with some minimum amount of data for each record of a given place type. Like everything else the <code>meta</code> files are a work in progress but are meant to provide a minimal ability to introspect the data without the need to load everything into a database.</p>

<h4><a name="venues"></a> Did you say… “venues” ?</h4>

<p>We did. We aren’t releasing any venue data under the Who’s On First banner, yet, but we are working on it. Venues are very much a part of Who’s On First but where they are not complicated they are simply numerous. Often they are both. So, simple things first. Harder things, like venues, will follow.</p>

<h4><a name="git"></a> A word about Git (and GitHub)</h4>

<p>Don’t get too attached to working with or managing Who’s On First data in GitHub (or Git in general). We haven’t quite figured out what the best way of both distributing the Who’s On First data or of accepting corrections and suggestions from the community is yet.</p>

<p>Even though the nice people at GitHub continue to do excellent work at making Git easier for a broader population to use, the reality remains that Git is a significant barrier to participation for many people. Absent a more formal decision about an alternative, GitHub at least allows us to point in the general direction of:</p>

<ul>
<li>An open and readily distributed dataset that people can download and work with</li>
<li>A way for people to contribute corrections (and general nuance) about a place</li>
<li>A way for us to be able to do everything above while still assuring us a measure of authority around the assertions we make about the data</li>
<li>Also a way for us to think about how and where we store an audit trail (of sorts) for updates to a place</li>
</ul>

<p>So again: Don’t get overly attached to the Git parts of the Who’s On First data. It is meant to indicate the idea and not necessarily the details.</p>

<h3>What is next?</h3>

<p><img src="images/20150818-wof-bushwick.jpg" alt="bushwick" /></p>

<p>A lot of work is what’s next.</p>

<p>More specifically what’s next is to start releasing the tools and libraries we’ve written internally for processing and managing Who’s On First data, releasing a version of the internal “spelunker” web application that we use to poke around the data and perform sanity-checking, building prototype services on top of all this data, finishing and in some cases starting documentation for all of the above and <a href="https://github.com/whosonfirst/whosonfirst-data/issues">fixing all the bugs</a>.</p>

<p>Enjoy!</p>

<p><em>all images by Aaron Cope</em></p>

		</article>
		</div>
		</div>	
		</div>	

		<footer>
			<nav class="navbar navbar-default navbar-bottom">
				<div class="container">
					
					<ul class="nav navbar-nav navbar-right whosonfirst-footer">
						<li><a href="/docs/contributing/" class="whosonfirst-nav-link whosonfirst-footer-nav-link">contributing</a></li>
						<li><a href="/docs/licenses/" class="whosonfirst-nav-link whosonfirst-footer-nav-link">license</a></li>
						<li><a href="https://twitter.com/alloftheplaces/" class="whosonfirst-nav-link whosonfirst-footer-nav-link">twitter</a></li>
					</ul>
				</div>
			</nav>
		</footer>

		
		<script src="/javascript/jquery.min.js"></script>
		
		<script src="/javascript/bootstrap.min.js"></script>
		<script src="/javascript/mapzen.whosonfirst.home.js"></script>
		<script src="/javascript/mapzen.whosonfirst.subpage.js"></script>
		
		<script src="/javascript/highlightpack.js"></script>
		<script>
		  try {
		  	hljs.initHighlightingOnLoad();
		  } catch (e) {
		  	console.log("HLJS", e);
		  }
		</script>
	</body>
</html>

